<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Layers View</title>
        <link rel="stylesheet" href="nbdocs://au.gov.asd.tac.constellation.preferences/au/gov/asd/tac/constellation/preferences/constellation.css" type="text/css">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <h2>Layers View</h2>
        <p>The Layers View holds a collection of Layers. Each Layer can represent a static set of elements, or a dynamically calculated set of elements which match a query criteria.</p>
        <p>The following image shows the basic components of the Layers View</p>
        <img src="resources/layers-view-example.png" alt="">
        <br />
        <h2>Creating and Using The Layers View</h2>
        <p>There are two main ways to create and use Layers: Through the Layers View Window, and through the use of shortcut keys.</p>
        <p>To create a Layer with a shortcut key, hold Control-Alt + L. To Toggle a Layer with a shortcut key, Control-Alt + the 
            corresponding number from 1-9. The shortcut key Control-Alt + D can also be used to deselect any active 
            layers as per the image above. The maximum amount of layers is 64.</p>
        <p>To add an element to a layer, you may either use the right click context menu to add/remove it from the specified layer.</p>
        <img src="resources/layers-context.png" alt="">
        <h2>Layer Types</h2>
        <p>There are 2 main layer types within the Layers View. The differentiating factor of the two being the way elements are chosen to
        be displayed.</p>
        <h3>Manual Layer</h3>
        <p>The Manual Layer is a layer which only contains elements added via right click context menu on an element. </p>
        <h3>Query Layer</h3>
        <p>The Query Layer is a layer which shows only the elements represented by the query in either fields Vertex or Transaction. 
        The query layer is designed to act dynamically. Therefore it will get recalculated if the value the layer is concerned about changes.
        For example, Layer 1 has a vertex query described as Label == 'Vertex #0'. This will show the vertex with that label. The layer is enabled.
        That element is shown. Choose to change Vertex #0's label to something like 'V#0', the query will note the change and recalculate for the whole graph.
        </p>
        <h2>Multi-Layered Behaviour</h2>
        <p>When a single layer is toggled on, it will reflect on the graph. When multiple manual layers are selected, it will reflect as show
            everything on layer x, as well as on layer y.
        <br />
        <h2>Query Language</h2>
        <p>To query elements, the query must be valid. A valid query takes the form of [attributeName] [operator] [value]. As an example, 
        the following would show elements with the Label that matches the string within the quotes. Label == 'Vertex #0'</p>
        <h3>Attribute Names</h3>
        <p>Any attribute name can be used to query the graph. Below is a short list of commonly queried attributes.</p>
        <ul>
            <li>Label - Label displayed for that element</li>
            <li>color - color of that element</li>
            <li>Type - type of that element</li>
            <li>selected - boolean value representing if the element is selected</li>
            <li>directed - boolean value representing if the transaction is directed</li>
        </ul>
            
        <h3>Operators</h3>
        <p>Operators can be used to query, edit and compare values. Below is a list of currently supported query operators.</p>
        <ul>
            <li>== - [Equals]</li>
            <li>!= - [Not Equals]</li>
            <li>&gt; - [Greater Than] </li>
            <li>&lt; - [Less Than] </li>
            <li>&gt;= - [Greater Than Or Equals] </li>
            <li>&lt;= - [Less Than Or Equals] </li>
            <li>& - [And]</li>
            <li>= - [Assign]</li>
            <li>| - [Or]</li>
            <li>^ - [XOR]</li>
            <li>! - [Not]</li>
            <li>+ - [Add]</li>
            <li>- - [Subtract]</li>
            <li>* - [Multiply]</li>
            <li>/ - [Divide]</li>
            <li>% - [Modulo]</li>
            <li>contains - [Contains]</li>
            <li>startswith - [Starts With]</li>
            <li>endswith - [Ends With]</li>
            <li>or - [Or]</li>
            <li>and - [And]</li>
            <li>equals - [Equals]</li>
            <li>notequals - [Not Equals]</li>
        </ul>
        <h2>Escaping Values</h2>
        <p>To ensure correct querying, values must be escaped via 'single' or "double" quotes.</p>
        <br />
        <h3>Advanced Usage</h3>
        <p>Using the query layers enables the use of nested queries. This makes complex conditions possible. Nested queries can be achieved by 
        simply surrounding internal queries with ( and ).</p>
        <p>Label == 'Vertex #0&lt;Unknown&gt;' || Label == 'Vertex #1&lt;Unknown&gt;' - Shows elements that satisfy either constraint.</p>
        <p>Label == 'Vertex #0&lt;Unknown&gt;' &AMP; nradius == '1.5' - shows elements that satisfy both constraints.</p>
    </body>
</html>
